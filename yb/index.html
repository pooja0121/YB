<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Patient Form</title>

  <!-- intl-tel-input CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css"/>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f8f9fa;
      margin: 0;
      padding: 20px;
    }

    .container {
      background: #fff;
      max-width: 1000px;
      margin: auto;
      padding: 20px 30px;
      border-radius: 6px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #007bff;   
      padding: 10px 15px;
      border-radius: 4px 4px 0 0; 
    }

    .header label {
      color: #fff;  
      font-weight: bold;
    }

    .header select {
      padding: 6px;
      font-size: 14px;
    }

    .header .new-patient {
      background: #fff;      
      color: #007bff;        
      font-weight: bold;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
    }

    .header .new-patient:hover {
      background: #e6e6e6;   
    }

    h2 {
      text-align: center;
      color: #007bff;
      margin-top: 20px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 20px;
    }

    label {
      font-size: 14px;
      font-weight: 600;
      display: block;
      margin-bottom: 6px;
    }

    input, select {
      width: 100%;
      padding: 8px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    .full-width {
      grid-column: span 3;
      text-align: right;
    }

    .save-btn {
      background: #007bff;
      color: #fff;
      border: none;
      padding: 8px 20px;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
    }

    .save-btn:hover {
      background: #0056b3;
    }

    .success-message {
      display: none;
      margin-top: 20px;
      padding: 12px;
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
      border-radius: 4px;
      font-weight: bold;
      text-align: center;
    }

    #collectedData {
      display: none;
      margin-top: 20px;
      background: #fff;
      border: 1px solid #ddd;
      padding: 20px;
      border-radius: 6px;
      line-height: 1.6;
    }
    #collectedData b {
      color: #333;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <label for="selectPatient">Select Patient</label>
        <select id="selectPatient">
          <option value="">-- Select Patient --</option>
          <option>Patient A</option>
          <option>Patient B</option>
        </select>
      </div>
      <button class="new-patient" id="newPatientBtn">+ New Patient</button>
    </div>

    <!-- Title -->
    <h2>Patient Appointment Form</h2>

    <!-- Form -->
    <form id="patientForm" action="/submit" method="post">
      <div class="form-grid">
        <div>
          <label for="date">Date</label>
          <input type="date" id="date" name="date">
        </div>

        <div>
          <label for="timeRange">Time Range</label>
          <input type="text" id="timeRange" name="timeRange" placeholder="09:00 AM - 10:00 AM">
        </div>

        <div>
          <label for="patientName">Patient Name *</label>
          <input type="text" id="patientName" name="patientName" required pattern="[A-Za-z\s]+" title="Only letters allowed">
        </div>

        <div>
          <label for="gender">Gender</label>
          <select id="gender" name="gender">
            <option value="">Select</option>
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
          </select>
        </div>

        <div>
          <label for="email">Email</label>
          <input type="email" id="email" name="email">
        </div>

        <div>
          <label for="phone">Phone *</label>
          <input id="phone" name="phone" type="tel" required pattern="[0-9]{10}" maxlength="10" title="Enter 10 digit Indian phone number">
        </div>

        <div>
          <label for="doctor">Doctor *</label>
          <select id="doctor" name="doctor" required>
            <option value="">--Select--</option>
            <option>George William</option>
            <option>Helen Jones</option>
            <option>Kofi Owusu Boahene</option>
            <option>Akwasi Owusu</option>
            <option>Samuel Mensah</option>
            <option>Kofi Boahene</option>
          </select>
        </div>

        <div>
          <label for="priority">Appointment Priority</label>
          <select id="priority" name="priority">
            <option value="">--Select--</option>
            <option>High</option>
            <option>Medium</option>
            <option>Low</option>
          </select>
        </div>

        <div>
          <label for="consultant">Live Consultant (On Video Conference)</label>
          <select id="consultant" name="consultant">
            <option value="">--Select--</option>
            <option>Available</option>
            <option>Not Available</option>
          </select>
        </div>

        <div>
          <label for="status">Status</label>
          <select id="status" name="status">
            <option value="">--Select--</option>
            <option>Confirmed</option>
            <option>Pending</option>
            <option>Cancelled</option>
          </select>
        </div>

        <div>
          <label for="nurse">Nurse</label>
          <input type="text" id="nurse" name="nurse">
        </div>

        <div>
          <label for="caseId">Case ID</label>
          <input type="text" id="caseId" name="caseId" value="CAS123456789">
        </div>

        <div>
          <label for="encounterId">Encounter ID</label>
          <input type="text" id="encounterId" name="encounterId" value="ENC123456789">
        </div>

        <div>
          <label for="paymentMode">Payment Mode</label>
          <select id="paymentMode" name="paymentMode">
            <option value="Cash">Cash</option>
            <option value="Card">Card</option>
            <option value="UPI">UPI</option>
          </select>
        </div>

        <div>
          <label for="paymentStatus">Payment Status</label>
          <select id="paymentStatus" name="paymentStatus">
            <option value="">--Select--</option>
            <option>Paid</option>
            <option>Unpaid</option>
            <option>Pending</option>
          </select>
        </div>
      </div>

      <!-- Save Button -->
      <div class="full-width">
        <button type="submit" class="save-btn">Save</button>
        <div id="successMessage" class="success-message">
          Patient added successfully!
        </div>
      </div>
    </form>

    <!-- Collected Data Output -->
    <div id="collectedData"></div>
  </div>

  <!-- intl-tel-input JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>

  <script>
    // Phone input with India restriction
    const phoneInputField = document.querySelector("#phone");
    const iti = window.intlTelInput(phoneInputField, {
      initialCountry: "in",   // Fixed to India
      onlyCountries: ["in"],  // Allow only India
      utilsScript:
        "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
    });

    // Form submit
    document.getElementById("patientForm").addEventListener("submit", function (e) {
      e.preventDefault(); 
      document.getElementById("successMessage").style.display = "block";

      const data = {
        date: document.getElementById("date").value,
        timeRange: document.getElementById("timeRange").value,
        patientName: document.getElementById("patientName").value,
        gender: document.getElementById("gender").value,
        email: document.getElementById("email").value,
        phone: document.getElementById("phone").value,
        doctor: document.getElementById("doctor").value,
        priority: document.getElementById("priority").value,
        consultant: document.getElementById("consultant").value,
        status: document.getElementById("status").value,
        nurse: document.getElementById("nurse").value,
        caseId: document.getElementById("caseId").value,
        encounterId: document.getElementById("encounterId").value,
        paymentMode: document.getElementById("paymentMode").value,
        paymentStatus: document.getElementById("paymentStatus").value,
      };

      let output = `<h3>Collected Data</h3>`;
      for (let key in data) {
        output += `<p><b>${key.replace(/([A-Z])/g, ' $1')}:</b> ${data[key]}</p>`;
      }

      document.getElementById("collectedData").innerHTML = output;
      document.getElementById("collectedData").style.display = "block";
    });

    // New Patient button
    document.getElementById("newPatientBtn").addEventListener("click", function () {
      const form = document.getElementById("patientForm");
      form.reset();
      iti.setNumber(""); 
      document.getElementById("successMessage").style.display = "none";
      document.getElementById("collectedData").style.display = "none";

      document.getElementById("caseId").value = "CAS" + Date.now();
      document.getElementById("encounterId").value = "ENC" + Date.now();
    });
  </script>
</body>
</html>
